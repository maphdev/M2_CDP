language: node_js
node_js:
- node
services:
- docker
before_install:
- cd cdp-2018
install:
- docker build -t myapp .
- docker run -d -p 8081:8080 --name myapp myapp

addons:
  sonarcloud:
    organization: "maphdev-github"
    token:
      secure: "BRNjPvrgA2Mw+Ftf9lVTp0U+h+hqxf9HjrU9pVTVvPLjv9FecquqqQm/bel9zrZC+VyO0ZGBnNRW+70piSJl/P6G1nbRWvYNAF/SRygtCntbMeP1hqajA53j3hrfadLxUzqFSIyHpeX3eEpGSijl63ONSnJMEX/BgtxB0CPfYsyUFJd+VIfmRpfrRKIa5HtPP7qaGlpPC05xZgAfNZ159X3ydKj+w+m/DPqM0QDDUumEFe8dwDMuMdR1u0IGHlf2WFtaF5wZN3i6N4g/tV2UXn16QEPOTBAYkrgTmS3QOJczz9u6lV4eINAeyylmWbDme1sPvhzgubWOtMVdtGK5bbNqcJ3KBWYnK8GvaMzci1rsbgGqYWzcPY5Dh1yFSyHszwkczcSh2O7oxpRZ3rjkL55iJT9xQYxjKYH+0EWciOd2wnmrbSKaqnXXXlssJ+/ZBQGjyWenU3UfSL81YdmA29Lnnh0k847ruNVpN0nrDSaD9l2m5kHmBGbnEtNmcb7EcpcrNBiHiLMtWJwLxebAdnQRUSuBaRBW/rCdHdJM7yBVBpKq5J+t2f72dxzi40mgwg9PPB3yKE//bOAKaPuKd59xm4knYsIKwbm3HzmiLkdPj2fyvhHQsJIgjZ1Uvpgeg73E9+U91gU0FjJBZnr4yXgDdij35DLk0FIjRkORvmo="

script:
  # other script steps might be done before running the actual analysis
  - docker ps | grep -i myapp
  - sonar-scanner
